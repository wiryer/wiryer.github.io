<!DOCTYPE html>
<html lang="ko-kr">
  <head>
    <meta charset="utf-8" />
<title>2. 배포절차</title>


  




<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link
  rel="alternate"
  type="application/rss+xml"
  href="http://wiryer.github.io/index.xml"
  title="It&#39;s a Wonderful Life"
/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="2. 배포절차"/>
<meta name="twitter:description" content="1. 프로젝트 생성 1.1 개발자 등록
 Gitlab 시스템에 개발자를 등록한다. 등록 방법은 SWA가 제시하는 방법에 따른다. SWA(또는 Admin)는 프로젝트에 대한 개발자 권한을 설정하여 제공한다.   1.2 프로젝트 생성
 최초 프로젝트 생성은 SWA 등 maintainer 권한을 가진 사용자가 생성한다.   Figure-1. 프로젝트 생성     프로젝트를 생성 후, 최초 소스를 Master Origin에 PUSH 한다.  cd example git init git remote add origin http://gitlab.dev.lghomin.com/sample/example.git git add ."/>



<link rel="stylesheet" href="http://wiryer.github.io/fontawesome/css/all.min.css" />

<link
  id="dark-mode-theme"
  rel="stylesheet"
  href="http://wiryer.github.io/css/dark.css"
/>

<script>
  var darkTheme = document.getElementById('dark-mode-theme')
  var storedTheme = localStorage.getItem('dark-mode-storage')
  if (storedTheme === 'dark') {
    darkTheme.disabled = false
  } else if (storedTheme === 'light') {
    darkTheme.disabled = true
  }
</script>

<script src="http://wiryer.github.io/js/main.bundle.js"></script>
<script src="http://wiryer.github.io/js/instantpage.min.js" type="module" defer></script>
<meta name="generator" content="Hugo 0.83.1" />
  </head>
  <body>
    
  




  <header>
    <nav class="navbar">
  <div class="nav">
    

    <ul class="nav-links">
      
    </ul>
  </div>
</nav>

    <div class="intro-header">
      <div class="container">
        <div class="page-heading">
          
            <h1>
              2. 배포절차
            </h1>
          
          
        </div>
      </div>
    </div>
  </header>
  

    
  <div class="container" role="main">
    <article class="article" class="blog-post">
      
  <h3 id="1-프로젝트-생성">1. 프로젝트 생성</h3>
<p>1.1 개발자 등록</p>
<ul>
<li>Gitlab 시스템에 개발자를 등록한다. 등록 방법은 SWA가 제시하는 방법에 따른다.</li>
<li>SWA(또는 Admin)는 프로젝트에 대한 개발자 권한을 설정하여 제공한다.</li>
</ul>
<p> </p>
<p>1.2  프로젝트 생성</p>
<ul>
<li>최초 프로젝트 생성은 SWA 등 maintainer 권한을 가진 사용자가 생성한다.</li>
</ul>
<figure><img src="/cicd/project_create.png"
         alt="프로젝트 생성"/><figcaption>
            <h4>Figure-1. 프로젝트 생성</h4>
        </figcaption>
</figure>

<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p> </p>
<ul>
<li>프로젝트를 생성 후, 최초 소스를 Master Origin에 PUSH 한다.</li>
</ul>
<pre><code>cd example
git init
git remote add origin http://gitlab.dev.lghomin.com/sample/example.git
git add .
git commit -m &quot;Initial commit&quot;
git push -u origin master
</code></pre><p> </p>
<ul>
<li>최초 생성된 master 브랜치로부터 develop 브랜치를 생성한다.
<figure><img src="/cicd/develop_branch_create.png"
         alt="master로부터 develop 브랜치 생성"/><figcaption>
            <h4>Figure-2. master로부터 develop 브랜치 생성</h4>
        </figcaption>
</figure>
</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p> </p>
<p>1.3  권한설정</p>
<ul>
<li>develop 브랜치에 Protected 설정한다.</li>
<li>master, develop 브랜치는 protected로 설정되어 있어서 빌드 및 배포가 가능하다.</li>
<li>개발자는 develop 브랜치에 대한 merge 권한만 주고, push 권한은 제외해 개발자는 feature를 통해서 merge 하도록 한다.</li>
</ul>
<figure><img src="/cicd/develop_protected.png"
         alt="develop 브랜치 Protected 설정"/><figcaption>
            <h4>Figure-3. develop 브랜치 Protected 설정 </h4>
        </figcaption>
</figure>

<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p> </p>
<ul>
<li>태그에대한 Protected 설정을 한다.</li>
<li>Protected Tags 설정을 해야만 Tag에 의한 운영 배포 시 Protected 하게 설정된 글로벌 변수를 사용할 수 있다.</li>
<li>Protected Tags 설정이 된 Tag 들을 부득이하게 삭제 할 경우 Protected를 풀어줘야 한다.(삭제 후 재설정)</li>
</ul>
<figure><img src="/cicd/protected_tags.png"
         alt="Tag Protected 설정"/><figcaption>
            <h4>Figure-4. Tag Protected 설정</h4>
        </figcaption>
</figure>

<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p> </p>
<ul>
<li>프로젝트에 대한 담당 개발자에게 개발 권한을 준다.
<figure><img src="/cicd/project_develop_permission.png"
         alt="개발자에게 프로젝트 개발 권한설정"/><figcaption>
            <h4>Figure-5. 개발자에게 프로젝트 개발 권한설정</h4>
        </figcaption>
</figure>
</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p> </p>
<h3 id="2-배포절차">2. 배포절차</h3>
<p>2.1 개발자 환경구성</p>
<ul>
<li>SWA 가 제공하는 가이드에 따른 로컬에 개발환경 설정</li>
<li>개발대상 프로젝트를 로컬에 내려 받는다. 
<figure><img src="/cicd/clone_url.png"
         alt="clone url 복사"/><figcaption>
            <h4>Figure-6. clone url 복사</h4>
        </figcaption>
</figure>
</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<pre><code>git clone http://gitlab.dev.lghomin.com/sample/example.git
</code></pre><p> </p>
<p>2.2 기능개발</p>
<ul>
<li>새로운 기증을 개발하기 위해 feature 브랜치를 생성한다.</li>
</ul>
<pre><code>git checkout -b feature/test1
</code></pre><ul>
<li>개발이 완료되고, 로컬에서 테스트를 완료하면 Gitlab 서버에 feature 를 업로드한다.</li>
</ul>
<pre><code>git commit -a -m &quot;Test Commit 실행-1&quot;
git push origin feature/test1
</code></pre><ul>
<li>feature 브랜치를 develop 브랜치에 merge 한다.</li>
<li></li>
</ul>
<figure><img src="/cicd/develop_merge.png"
         alt="develop 브랜치에 merge"/><figcaption>
            <h4>Figure-7. develop 브랜치에 merge</h4>
        </figcaption>
</figure>

<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p> </p>
<ul>
<li>develop 브랜치의 pipeline이 성공여부를 확인 후 개발 환경에서 테스트를 한다.
<figure><img src="/cicd/develop_pipeline.png"
         alt="develop 브랜치 pipeline"/><figcaption>
            <h4>Figure-8. develop 브랜치 pipeline</h4>
        </figcaption>
</figure>
</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p> </p>
<p>2.3 스테이지</p>
<ul>
<li>개발환경에서 테스트가 통과하면, master 브랜치에 merge request를 한다.
<figure><img src="/cicd/master_branch_merge.png"
         alt="master 브랜치 merge"/><figcaption>
            <h4>Figure-9. master 브랜치 merge</h4>
        </figcaption>
</figure>
</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p> </p>
<ul>
<li>merge request 요청을 받고, <strong>담당 Maintainer</strong>가 (리뷰 후)  merge를 진행한다.
<figure><img src="/cicd/merge_ok.png"
         alt="merge 승인"/><figcaption>
            <h4>Figure-10. merge 승인</h4>
        </figcaption>
</figure>
</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p> </p>
<ul>
<li>master 브랜치의 pipeline이 성공여부를 확인 후 스테이지 환경에서 테스트를 한다.
<figure><img src="/cicd/master_pipeline.png"
         alt="master 브랜치 pipeline"/><figcaption>
            <h4>Figure-11. master 브랜치 pipeline</h4>
        </figcaption>
</figure>
</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p> </p>
<p>2.4 운영</p>
<ul>
<li>스테이지 환경에서 <strong>Maintainer가</strong> 테스트가 통과하면, 태깅 작업을 통해 운영환경에 배포한다.</li>
<li>Tag name은 protected 설정된 글로벌 변수를 사용하기 위해 protected tag에 설정한 패턴에 따른다.</li>
<li>현재 protected tag는 prod-* 로 되어있다.</li>
<li>master 브랜치로부터 태깅한다. develop 브랜치로 태깅시 운영환경 빌드 과정에서 오류가 발생한다.
<figure><img src="/cicd/tag_setting.png"
         alt="Tag 설정"/><figcaption>
            <h4>Figure-12. Tag 설정</h4>
        </figcaption>
</figure>
</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p> </p>
<ul>
<li>이전 master 커밋에 대한 Tag 작업은 해당 커밋 화면에서 진행 할 수 있다.</li>
<li>해당 commit → Options → Tag 클릭
<figure><img src="/cicd/pre_commit_tag.png"
         alt="이전 커밋으로 부터 Tag"/><figcaption>
            <h4>Figure-13. 이전 커밋으로 부터 Tag</h4>
        </figcaption>
</figure>
</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p> </p>
<ul>
<li>운영환경의 파이프 라인을 통해 배포 확인 후 운영환경에서 해당 기능을 점검한다.
<figure><img src="/cicd/prod_pipeline.png"
         alt="운영환경의 pipeline"/><figcaption>
            <h4>Figure-14. 운영환경의 pipeline</h4>
        </figcaption>
</figure>
</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p> </p>




      
    </article>
    
    
      

    
  </div>

    <footer>
  

<div class="social-icons">
  

  
</div>


  
  <div class="container">
    <p class="credits copyright">
      <a href="http://wiryer.github.io/about"></a>
      &nbsp;&copy;
      0001
      
        &nbsp;/&nbsp;
        <a href="http://wiryer.github.io/">It&#39;s a Wonderful Life</a>
      
      &nbsp;&ndash;&nbsp;
      <em class="fas fa-moon" id="dark-mode-toggle"></em>
    </p>

    <p class="credits theme-by">
      Powered By <a href="https://gohugo.io">Hugo</a>&nbsp;
      Theme
      <a href="https://github.com/matsuyoshi30/harbor">Harbor</a>
    </p>
  </div>
</footer>

  </body>
</html>
